---
title: Linux小知识之配置
date: 2014-12-01 19:12:28 +0800
tags: web
- a
- b
---

* toc 
{:toc}

###显示配置
使用xrandr命令可以配置多显示器或单显示器显示，

列出支持的显卡
    
    xrandr

关闭外接的显卡

    xrandr --output VGA1 --off
    
两个显卡显示相同的内容，且设置分辨率，为了能在本机显示全

    xrandr --output VGA1 --same-as LVDS1 --mode 1024x768
    
两个显卡显示不同

    xrandr --output LVDS1 --auto --rotate normal --pos 0x0 --output VGA1 --auto --rotate normal --right-of LVDS1

详细参看 [xrandr in ArchWiki](https://wiki.archlinux.org/index.php/xrandr){:target="_blank"}

###设置音效设备

安装arch，使用openbox，然后什么外部设备的界面控制也没有装（机器比较挫，为了节省资源，其实也没有节省多少，尽折腾了）
对于音响，没有图形界面控制，就使用了 `aumix` 命令

    aumix -v 85 -q  
    aumix -v +10 q 
 
上面命令的说明

 -q 　显示所有频道的设置值。
 -v 　主音量。

更多的用 `man` 看下
 
###虚拟机重启键冲突

虚拟机上使用 `ctrl+alt+del` 与host的键冲突，这个时候，使用键盘右边的 `ctrl+alt`

###wireless无线配置
  
    wpa_pass* essid passworld > /etc/wpa_supplicant.conf
    wpa_supplicant -B -Dwext -i wlan0 -c /etc/wpa_supplicant.conf
    iwconfig wlan0 essid XXXX
    dhcpcd wlan0
    
使用rtl8192SE的无线网卡时，当把驱动编译的到内核的时候，不能使用，而编译为模块就好用了。参考 [wireless in ArchWiki](https://wiki.archlinux.org/index.php/Wireless){:target="_blank"}

###vitrualBox

早上来到，VB每次启动都有问题，说是在libQtCoreVitrul.so.0的某个地方有段错误，
直接重新安装VB也不起作用，将/opt/VitrualBox/文件删掉，然后重新安装，有了新的问题

. 显示启动不了 -- 将显卡的内存调大  
. 然后有权限问题 -- 将/opt/ 整个目录都改成root的    
. 还是不行 -- chmod 755 /opt/VirtualBox/VirtualBox  
. 仍旧不可以(提示让重新安装) -- 重新安装  

总结，/opt下的内容要有适合的用户名和用户权限


###磁盘空间

删除一些文件后，磁盘空间还是满的，因为那些文件都还在打开的状态被你删除了，虽然你在硬盘上删除了文件，但是系统还认为这些文件还存在，你可以
`lsof |grep delete`看看，应该有很多你之前删除，但是还被系统打开的文件，找到相应的id，kill之。

如果进程不能kill， `echo > /proc/pid/fd/对应的文件`

参考[为什么删除文件后磁盘空间还是不变](http://zhumeng8337797.blog.163.com/blog/static/100768914201121125649849/){:target="_blank"}。


###vpn访问

    pptpsetup -create vpn -server VPN-SERVER-IP -username 用户名 -password 密码 -encrypt -start
    /sbin/route add -net 0.0.0.0 dev ppp0
    
上面的命令就好使了，如果想了解更多，可以参考 [PPTP VPN Client in ArchWiki](https://wiki.archlinux.org/index.php/PPTP_VPN_client_setup_with_pptpclient){:target="_blank"}。

###防火墙

redhat系列的发行版，默认都有防火墙，在配置samba、nginx等的时候，要注意，不然会浪费比较长的时间。

###ulimit

    sudo vim /etc/security/limits.conf
    ## 设置root帐户
    ## nofile 表示文件句柄数的设置
    ## soft即是软限制，hard是硬限制。用户可以超过soft设置的值，但一定不能超过hard 的值。一般soft比hard小
    root soft nofile 65536
    root hard nofile 65536
    ## 设置work帐户
    work soft nofile 65536
    work hard nofile 65536
  
 这样设置之后，退出重新登录即生效。
 若想对work帐户的nofile再做更进一步的设置，可在 ~/.bashrc 文件下添加一行，如 `ulimit -n 51200`, 即设置文件句柄数限制为51200。
 注意，在 ~/.bashrc 中的数值不可超过 hard 所设置的值。
 
###windows配置
使用qemu启动一个windows的虚拟机
    
    sudo qemu-kvm -hda xp.qcow2 -boot c -smp 2 -m 512  -display vnc=0.0.0.0:11
    
一些博客中提到，如果不想使用图形界面，启动linux的时候，可以使用串口，将启动的信息都展示出来，而且允许在串口登陆。
但是windows呢，windows必须要有图形界面，这个时候就可以使用vnc的展示方式来访问了。  

如果已经配置了windows的用户名和密码，又想不输入密码直接登录，可以如下配置：

Win-XP:

单击“开始/运行”，输入“rundll32 netplwiz.dll,UsersRunDll”，按回车键后弹出“用户帐户”窗口，看清楚，这可跟“控制面板”中打开的“用户账户”面板窗口不同哦！然后取消选定“要
使用本机，用户必须输入用户名和密码”选项，单击确定，在弹出的对话框中输入你想让电脑每次自动登录的账户和密码即可。

参考：[开机自动登录桌面](http://jjxzjz.blog.163.com/blog/static/349259452008238178138){:target=":_blank"}
  

