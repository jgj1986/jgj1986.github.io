---
title: Kafka了解
date: 2015-04-07 15:12:28
tags: language 
- a
- b
---

* toc 
{:toc}

>数据流接收分发的方式很多，用了很长时间的Heka，但是Kafka更加流行一些。最近看到Spark 已经与Kafka直接结合，可以摄取实时事件数据；觉得有必要在多了解下，以后应该会用到

##安装
作为分布式的系统，kafka支持多种实例

    单节点单broker实例
    单节点多broker实例
    多节点多实例

相对而言kafka集群的安装时比较容易的，不多介绍，
可参考[Kafka详解之如何配置Kafka集群](http://www.tuicool.com/articles/RNbU32B){:target="_blank"}、[Kafka QuickStart](https://kafka.apache.org/documentation.html#quickstart){:target="_blank"}。

##使用
Kafka官网上有创建topic、发送信息、使用信息的例子，此处不再举例。在实际的应用中，要获取的数据都已经落地以文件形式存在，如nginx的访问日志等。  
在要用Kafka分析处理的就是这些日志，如何将这些处理进入到Kafka集群中呢？

    tail -n 0 -f /data/logs/nginx_access.log  | bin/kafka-console-producer.sh --broker-list 192.168.1.10:9092 --topic test

kafka使用scala开发，支持多语言客户端（c++、java、python、go等），详细的使用列表情况，参考 [Apache Kafka Client](https://cwiki.apache.org/confluence/display/KAFKA/Clients){:target="_blank"}，
例如有 [python-kafka](https://github.com/mumrah/kafka-python){:target="_blank"}。


##思考
常见的配置中，kafka都是和zookeeper在同样的机器上，其实两者是可以分开的。Kafka的集群使用Zookeeper集群的一些配置。
Kafka、Storm、Hbase、Dubbo等都广泛的使用Zookeeper，如果一个Zookeeper集群被这些工具同时使用，是否会有数据的冲突呢，
又有什么办法可以避免这些冲突呢？
