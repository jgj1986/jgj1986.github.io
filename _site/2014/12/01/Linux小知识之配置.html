<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="author" content="jgj" />
        <meta name="viewport" content="width=device-width" /> 
        <title>Linux小知识之配置 | 我是疯子</title>
        
        <meta name="keywords" content="" />
        

        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- bootstrap source -->
        <!-- 新 Bootstrap 核心 CSS 文件 -->
        <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.2.0/css/bootstrap.min.css" />
        <!-- 可选的Bootstrap主题文件（一般不用引入） -->
        <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.2.0/css/bootstrap-theme.min.css" />
        <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
        <script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
        <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
        <script src="http://cdn.bootcss.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

        <link rel="stylesheet" href="/asset/css/kissdata.css" />

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="http://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
            <script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <link href="/feed.html" rel="alternate" title="jgj" type="application/atom+xml" />
        <link rel="shortcut icon" href="/favicon.ico" />
        <link rel="icon" href="/favicon.ico" />

        <style type="text/css">
            body {
                padding-top: 55px;
                padding-bottom: 30px;
                background-color: #EEE;
            }
        </style>

        <link rel="stylesheet" href="/asset/js/google-code-prettify/prettify.css">
        <script src="/asset/js/google-code-prettify/prettify.js"></script>

        <script type="text/javascript">
            $(document).ready(function () {

                // go to top
                var bt = $('#toolBackTop'); var sw = $(document.body)[0].clientWidth; var limitsw = (sw - 840) / 2 - 80; if (limitsw > 0){ limitsw = parseInt(limitsw); bt.css("right",limitsw); } $(window).scroll(function() { var st = $(window).scrollTop(); if(st > 30){ bt.show(); }else{ bt.hide(); } });

                // google-code-prettify
                $("pre").addClass("prettyprint linenums"); prettyPrint();

            })
        </script>

        <!-- kp747 
        
        -->
    </head>
    <body>
            <div id="header">
    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand normal-a" href="javascript:void(0)" onclick="javascript:void(0)">
                    <span id="site_name">我是疯子</span>
                </a>
            </div>

            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li><a href="/">首页</a></li>
                    <li><a href="/categories.html">分类</a></li>
                    <li><a href="/guestbook.html">留言</a></li>
                    <li><a href="/about.html">关于</a></li>
                    <li><a href="/feed.html">RSS</a></li>
                    <li><a href="javascript:void(0)" class="normal-a" onclick="javascript:void(0)"><span id="site_description">在此停留片刻，偶有所得！</span></a></li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </nav>
</div>


            <div class="container">
                <div class="row">
                    <div class="col-md-9" id="main-left">
                        <div class="page">
    <div class="head">
        <div class="title">Linux小知识之配置</div>
        <div class="date">date: 2014-12-01</div>
    </div>
    <hr class="middle-margin" />


    <!-- google adsense -->
    <!--
    <div>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
            style="display:inline-block;width:728px;height:90px"
            data-ad-client="ca-pub-1339945837472110"
            data-ad-slot="9657522081"></ins>
        <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script>
    </div>
    <hr class="middle-margin" />
    -->

    <div class="content">
        <ul id="markdown-toc">
  <li><a href="#section">显示配置</a></li>
  <li><a href="#section-1">设置音效设备</a></li>
  <li><a href="#section-2">虚拟机重启键冲突</a></li>
  <li><a href="#wireless">wireless无线配置</a></li>
  <li><a href="#vitrualbox">vitrualBox</a></li>
  <li><a href="#section-3">磁盘空间</a></li>
  <li><a href="#vpn">vpn访问</a></li>
  <li><a href="#section-4">防火墙</a></li>
  <li><a href="#ulimit">ulimit</a></li>
  <li><a href="#windows">windows配置</a></li>
</ul>

<h3 id="section">显示配置</h3>
<p>使用xrandr命令可以配置多显示器或单显示器显示，</p>

<p>列出支持的显卡</p>

<pre><code>xrandr
</code></pre>

<p>关闭外接的显卡</p>

<pre><code>xrandr --output VGA1 --off
</code></pre>

<p>两个显卡显示相同的内容，且设置分辨率，为了能在本机显示全</p>

<pre><code>xrandr --output VGA1 --same-as LVDS1 --mode 1024x768
</code></pre>

<p>两个显卡显示不同</p>

<pre><code>xrandr --output LVDS1 --auto --rotate normal --pos 0x0 --output VGA1 --auto --rotate normal --right-of LVDS1
</code></pre>

<p>详细参看 <a href="https://wiki.archlinux.org/index.php/xrandr" target="_blank">xrandr in ArchWiki</a></p>

<p>*
在安装ubunut14.04版本是遇到显示的问题，某个字显示时好时坏，还偶尔会有花屏的问题。</p>

<pre><code>$ cat /etc/modprobe.d/radeon-kms.conf 
options radeon modeset=0  
</code></pre>

<h3 id="section-1">设置音效设备</h3>

<p>安装arch，使用openbox，然后什么外部设备的界面控制也没有装（机器比较挫，为了节省资源，其实也没有节省多少，尽折腾了）
对于音响，没有图形界面控制，就使用了 <code>aumix</code> 命令</p>

<pre><code>aumix -v 85 -q  
aumix -v +10 q 
</code></pre>

<p>上面命令的说明</p>

<p>-q 　显示所有频道的设置值。
 -v 　主音量。</p>

<p>更多的用 <code>man</code> 看下</p>

<h3 id="section-2">虚拟机重启键冲突</h3>

<p>虚拟机上使用 <code>ctrl+alt+del</code> 与host的键冲突，这个时候，使用键盘右边的 <code>ctrl+alt</code></p>

<h3 id="wireless">wireless无线配置</h3>

<pre><code>wpa_pass* essid passworld &gt; /etc/wpa_supplicant.conf
wpa_supplicant -B -Dwext -i wlan0 -c /etc/wpa_supplicant.conf
iwconfig wlan0 essid XXXX
dhcpcd wlan0
</code></pre>

<p>使用rtl8192SE的无线网卡时，当把驱动编译的到内核的时候，不能使用，而编译为模块就好用了。参考 <a href="https://wiki.archlinux.org/index.php/Wireless" target="_blank">wireless in ArchWiki</a></p>

<h3 id="vitrualbox">vitrualBox</h3>

<p>早上来到，VB每次启动都有问题，说是在libQtCoreVitrul.so.0的某个地方有段错误，
直接重新安装VB也不起作用，将/opt/VitrualBox/文件删掉，然后重新安装，有了新的问题</p>

<p>. 显示启动不了 – 将显卡的内存调大<br />
. 然后有权限问题 – 将/opt/ 整个目录都改成root的  <br />
. 还是不行 – chmod 755 /opt/VirtualBox/VirtualBox<br />
. 仍旧不可以(提示让重新安装) – 重新安装  </p>

<p>总结，/opt下的内容要有适合的用户名和用户权限</p>

<h3 id="section-3">磁盘空间</h3>

<p>删除一些文件后，磁盘空间还是满的，因为那些文件都还在打开的状态被你删除了，虽然你在硬盘上删除了文件，但是系统还认为这些文件还存在，你可以
<code>lsof |grep delete</code>看看，应该有很多你之前删除，但是还被系统打开的文件，找到相应的id，kill之。</p>

<p>如果进程不能kill， <code>echo &gt; /proc/pid/fd/对应的文件</code></p>

<p>参考<a href="http://zhumeng8337797.blog.163.com/blog/static/100768914201121125649849/" target="_blank">为什么删除文件后磁盘空间还是不变</a>。</p>

<h3 id="vpn">vpn访问</h3>

<pre><code>pptpsetup -create vpn -server VPN-SERVER-IP -username 用户名 -password 密码 -encrypt -start
/sbin/route add -net 0.0.0.0 dev ppp0
</code></pre>

<p>上面的命令就好使了，如果想了解更多，可以参考 <a href="https://wiki.archlinux.org/index.php/PPTP_VPN_client_setup_with_pptpclient" target="_blank">PPTP VPN Client in ArchWiki</a>。</p>

<h3 id="section-4">防火墙</h3>

<p>redhat系列的发行版，默认都有防火墙，在配置samba、nginx等的时候，要注意，不然会浪费比较长的时间。</p>

<h3 id="ulimit">ulimit</h3>

<pre><code>sudo vim /etc/security/limits.conf
## 设置root帐户
## nofile 表示文件句柄数的设置
## soft即是软限制，hard是硬限制。用户可以超过soft设置的值，但一定不能超过hard 的值。一般soft比hard小
root soft nofile 65536
root hard nofile 65536
## 设置work帐户
work soft nofile 65536
work hard nofile 65536
</code></pre>

<p>这样设置之后，退出重新登录即生效。
 若想对work帐户的nofile再做更进一步的设置，可在 ~/.bashrc 文件下添加一行，如 <code>ulimit -n 51200</code>, 即设置文件句柄数限制为51200。
 注意，在 ~/.bashrc 中的数值不可超过 hard 所设置的值。</p>

<p>曾经遇到问题，修改就是不生效，而且修改了 /etc/sysctl中的file-max。后来发现在 /etc/profile中也做了限制！</p>

<h3 id="windows">windows配置</h3>
<p>使用qemu启动一个windows的虚拟机</p>

<pre><code>sudo qemu-kvm -hda xp.qcow2 -boot c -smp 2 -m 512  -display vnc=0.0.0.0:11
</code></pre>

<p>一些博客中提到，如果不想使用图形界面，启动linux的时候，可以使用串口，将启动的信息都展示出来，而且允许在串口登陆。
但是windows呢，windows必须要有图形界面，这个时候就可以使用vnc的展示方式来访问了。  </p>

<p>如果已经配置了windows的用户名和密码，又想不输入密码直接登录，可以如下配置：</p>

<p>Win-XP:</p>

<p>单击“开始/运行”，输入“rundll32 netplwiz.dll,UsersRunDll”，按回车键后弹出“用户帐户”窗口，看清楚，这可跟“控制面板”中打开的“用户账户”面板窗口不同哦！然后取消选定“要
使用本机，用户必须输入用户名和密码”选项，单击确定，在弹出的对话框中输入你想让电脑每次自动登录的账户和密码即可。</p>

<p>参考：<a href="http://jjxzjz.blog.163.com/blog/static/349259452008238178138" target=":_blank">开机自动登录桌面</a></p>


    </div>
</div>



    
        <div class="comment">
    
    <!-- duoshuo -->
    
    <div class="ds-thread" data-thread-key="/2014/12/01/Linux小知识之配置" data-title="Linux小知识之配置" data-url="http://jgj1986.github.io/2014/12/01/Linux%E5%B0%8F%E7%9F%A5%E8%AF%86%E4%B9%8B%E9%85%8D%E7%BD%AE.html"></div>
    <script type="text/javascript">
    var duoshuoQuery = {short_name:"blog-woshifengzi"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.unstable.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
    

    
    <!-- disqus -->
    
    
    
</div>

    



                    </div>
                    <div class="col-md-3" id="main-right">
                        <div>
    <h4><strong>文章分类</strong></h4>
    <hr class="small-margin colored-hr" />
    <ul class="side-cat-ul">
        
        <li><a href="/categories.html#cat-生活随记" title="生活随记">生活随记 (3)</a></li>
        
        <li><a href="/categories.html#cat-bigdata" title="bigdata">bigdata (9)</a></li>
        
        <li><a href="/categories.html#cat-web" title="web">web (9)</a></li>
        
        <li><a href="/categories.html#cat-database" title="database">database (3)</a></li>
        
        <li><a href="/categories.html#cat-linux" title="linux">linux (10)</a></li>
        
        <li><a href="/categories.html#cat-go" title="go">go (8)</a></li>
        
        <li><a href="/categories.html#cat-运维" title="运维">运维 (3)</a></li>
        
        <li><a href="/categories.html#cat-language" title="language">language (7)</a></li>
        
        <li><a href="/categories.html#cat-tools" title="tools">tools (1)</a></li>
        
        <li><a href="/categories.html#cat-iot" title="iot">iot (5)</a></li>
        
    </ul>
</div>

<hr class="small-margin colored-hr" />

<!-- google adsense -->
<!--
<div>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
        style="display:inline-block;width:300px;height:600px"
        data-ad-client="ca-pub-1339945837472110"
        data-ad-slot="8220828081"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
</div>
-->


                    </div>
                </div>
            </div>

            <div id="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <hr class="colored-hr" />

                <p class="text-center">
                Copyright 2014 - 2016 | Gen time&#58; 2016-04-12 01:51:47 CST

                <!-- cnzz -->
                

                </p>


            </div>
        </div>
    </div>
    <div style="display:none;" class="back-to" id="toolBackTop">
        <a title="返回顶部" onclick="window.scrollTo(0,0);return false;" href="#top" class="back-top">返回顶部</a>
    </div>

    <!-- google analytics -->
    


</div>

    </body>
</html>
