<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="author" content="jgj" />
        <meta name="viewport" content="width=device-width" /> 
        <title>Linux知识点汇总 | 我是疯子</title>
        
        <meta name="keywords" content="" />
        

        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- bootstrap source -->
        <!-- 新 Bootstrap 核心 CSS 文件 -->
        <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.2.0/css/bootstrap.min.css" />
        <!-- 可选的Bootstrap主题文件（一般不用引入） -->
        <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.2.0/css/bootstrap-theme.min.css" />
        <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
        <script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
        <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
        <script src="http://cdn.bootcss.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

        <link rel="stylesheet" href="/asset/css/kissdata.css" />

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="http://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
            <script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <link href="/feed.html" rel="alternate" title="jgj" type="application/atom+xml" />
        <link rel="shortcut icon" href="/favicon.ico" />
        <link rel="icon" href="/favicon.ico" />

        <style type="text/css">
            body {
                padding-top: 55px;
                padding-bottom: 30px;
                background-color: #EEE;
            }
        </style>

        <link rel="stylesheet" href="/asset/js/google-code-prettify/prettify.css">
        <script src="/asset/js/google-code-prettify/prettify.js"></script>

        <script type="text/javascript">
            $(document).ready(function () {

                // go to top
                var bt = $('#toolBackTop'); var sw = $(document.body)[0].clientWidth; var limitsw = (sw - 840) / 2 - 80; if (limitsw > 0){ limitsw = parseInt(limitsw); bt.css("right",limitsw); } $(window).scroll(function() { var st = $(window).scrollTop(); if(st > 30){ bt.show(); }else{ bt.hide(); } });

                // google-code-prettify
                $("pre").addClass("prettyprint linenums"); prettyPrint();

            })
        </script>

        <!-- kp747 
        
        -->
    </head>
    <body>
            <div id="header">
    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand normal-a" href="javascript:void(0)" onclick="javascript:void(0)">
                    <span id="site_name">我是疯子</span>
                </a>
            </div>

            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li><a href="/">首页</a></li>
                    <li><a href="/categories.html">分类</a></li>
                    <li><a href="/guestbook.html">留言</a></li>
                    <li><a href="/about.html">关于</a></li>
                    <li><a href="/feed.html">RSS</a></li>
                    <li><a href="javascript:void(0)" class="normal-a" onclick="javascript:void(0)"><span id="site_description">在此停留片刻，偶有所得！</span></a></li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </nav>
</div>


            <div class="container">
                <div class="row">
                    <div class="col-md-9" id="main-left">
                        <div class="page">
    <div class="head">
        <div class="title">Linux知识点汇总</div>
        <div class="date">date: 2014-11-16</div>
    </div>
    <hr class="middle-margin" />


    <!-- google adsense -->
    <!--
    <div>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
            style="display:inline-block;width:728px;height:90px"
            data-ad-client="ca-pub-1339945837472110"
            data-ad-slot="9657522081"></ins>
        <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script>
    </div>
    <hr class="middle-margin" />
    -->

    <div class="content">
        <ul id="markdown-toc">
  <li><a href="#md5">md5</a></li>
  <li><a href="#redis">redis乱码</a></li>
  <li><a href="#ssh">ssh免密码登录</a></li>
  <li><a href="#pythonhttp">python快速搭建http服务</a></li>
  <li><a href="#mysqlctrl-c">MySQL中的Ctrl C</a></li>
  <li><a href="#section">编码转义</a></li>
  <li><a href="#vim">vim特殊字符</a></li>
  <li><a href="#date">一些Date命令</a></li>
  <li><a href="#sort">sort</a></li>
  <li><a href="#linux">查看安装的linux发行版</a></li>
  <li><a href="#glibc">查看glibc版本</a></li>
  <li><a href="#tmux">tmux假死</a></li>
  <li><a href="#sort-1">sort</a></li>
  <li><a href="#grepawk">grep与awk结果不同</a></li>
  <li><a href="#ab">ab工具安装</a></li>
</ul>

<h3 id="md5">md5</h3>

<p>使用md5sum命令得到的md5，和用md5.lua得到的md5值不一样，如下：</p>

<pre><code>$ echo "hello" | md5sum
b1946ac92492d2347c6235b4d2611184  -
</code></pre>

<p>使用md5.lua进行测试</p>

<pre><code>$ lua
Lua 5.1.4  Copyright (C) 1994-2008 Lua.org, PUC-Rio
&gt; print(require("md5").sumhexa("hello"))
5d41402abc4b2a76b9719d911017c592    
</code></pre>

<p>这就比较奇怪了，md5加密的算法应该是为唯一的，怎么还会不一样呢？经过搜素，原来是echo中的回车导致的：</p>

<pre><code>$ echo -n "hello" | md5sum
5d41402abc4b2a76b9719d911017c592  -
</code></pre>

<h3 id="redis">redis乱码</h3>

<p>在redis 中存储中文，读取会出现乱码，如何在get时取到它的中文呢？只需要在redis-cli 后面加上 <code>--raw</code></p>

<pre><code>./redis-cli --raw
redis&gt; get test
"我们"
</code></pre>

<h3 id="ssh">ssh免密码登录</h3>

<p>第一创建时，将机器A的id_dsa.pub的内容，直接写到（比如用vim打开）机器B的authorized_keys中，及时将权限修改正确</p>

<pre><code>ls -l /home/work/.ssh
-rw-rw-r-- 1 work work  2379 May 26  2014 authorized_keys
-rw------- 1 work work   668 Dec 30  2013 id_dsa
-rw-r--r-- 1 work work   599 Dec 30  2013 id_dsa.pub
-rw-r--r-- 1 work work 20836 Nov 18 20:38 known_hosts
</code></pre>

<p>这个时候，也是往往不生效，而直接使用</p>

<pre><code>cat id_dsa.pub &gt; ~/.ssh/authorized_keys
</code></pre>

<p>则往往可以。</p>

<h3 id="pythonhttp">python快速搭建http服务</h3>

<p>在线上服务器拷贝文件的方法：
在服务器的相应文件目录下，用python开启一个服务</p>

<pre><code>python -m SimpleHTTPServer 8080  #(端口)
</code></pre>

<p>本地下载相应文件</p>

<pre><code>wget "http://ip:8088/filename"
</code></pre>

<h3 id="mysqlctrl-c">MySQL中的Ctrl C</h3>

<p>mysql中输入了一些命令后，发现有问题，或者这条命令不是我们想要的，直接 <code>Ctrl-C</code> ，就退出MySQL了。</p>

<p>可以用 <code>home</code>键 或 <code>Ctrl-a-a</code> 到命令行首，输入 <code>#</code> ，然后回车即可。</p>

<p>可以理解为注释掉这行，不让他执行了。</p>

<h3 id="section">编码转义</h3>

<pre><code>iconv -f gbk -t utf8 file &gt; new_file
</code></pre>

<h3 id="vim">vim特殊字符</h3>

<p>vim中有^M ^B ^A的形式，怎么样替换呢，或怎么样输入了</p>

<pre><code>:%s/^M/|/g，
</code></pre>

<p>其中输入是Ctrl-v Ctrl-m</p>

<h3 id="date">一些Date命令</h3>

<p>前一天
    # date –date=’1 days ago’ +%Y-%m-%d
    # date -d ‘1 days ago’ +%Y-%m-%d
    # date -d yesterday +%Y-%m-%d
    # date -d yesterday +%Y-%-m-%-d
明天
    # date –date=’1 days’ +%Y-%m-%d
    # date -d ‘1 days’ +%Y-%m-%d
    # date -d tomorrow +%Y-%m-%d</p>

<p>时间与时间戳</p>

<pre><code>date -d "2013-12-12 00:00:00" +%s
date -d @1386777600  "+%Y%m/%d"
date -d @1386777600  "+%Y-%m-%d %H:%M:%S"   
date --date='1 hour ago' +%Y%m%d%H%M
</code></pre>

<h3 id="sort">sort</h3>
<p>sort使用-t指定分隔符，默认的是’\t’和’ ‘，如果限制是’\t’的话，需要使用$符号，也就是</p>

<pre><code>sort -t $'\t'    
</code></pre>

<h3 id="linux">查看安装的linux发行版</h3>

<pre><code> cat /etc/issue
 lsb_release -a
 cat /proc/version
</code></pre>

<h3 id="glibc">查看glibc版本</h3>

<pre><code>  rpm -qi glibc
  ldd --version   
  /lib/libc.so.6
</code></pre>

<h3 id="tmux">tmux假死</h3>

<p>tmux是开发的利器。在实际使用过程中，遇到到假死的现象，即进去到某个session中，光标没有反应，但是可以正常的切换等。<br />
使用<code>Ctrl +  Q</code> 命令可以恢复。注意不是 ‘Ctrl-B + Q ‘</p>

<h3 id="sort-1">sort</h3>
<p>sort使用-t指定分隔符，默认的是’\t’和’ ‘，如果限制是’\t’的话，需要使用$符号，也就是 
    sort -t $’\t’ </p>

<h3 id="grepawk">grep与awk结果不同</h3>
<p>先看看几个命令统计的结果</p>

<pre><code>$ cat */* | awk -F'^B' '{if ($3="394428706") print $5}' |sort | uniq | wc -l
79489
$ cat */* |grep "394428706" |  awk -F'^B' '{print $5}' | sort | uniq | wc -l
2913
$ grep 394428706 */*  |  awk -F'^B' '{print $5}' | sort |uniq | wc -l
791
</code></pre>

<p>分析日志文件，看到里面有这样的内容：</p>

<pre><code>    ... ^B42218def915cbdb7^B^@^@:^@^@:^@^@:^@^@:^@^@:^@^@^B865163021157151^B^B^B1.2.0^B4^B^B    
</code></pre>

<p>后面在执行的时候就受到影响。为什么呢?</p>

<pre><code>man awk: 
awk cannot handle ascii NUL \0 in the source or data files
</code></pre>

<p>写段c代码可以看到 \0 的输出</p>

<pre><code>#include &lt;stdio.h&gt;
int main(int argc, char *argv[]) {
    printf("##%c###\n", '\0');
    return 0;
}
</code></pre>

<p>在vim中看到输出 ##^@###，这样awk处理时会就有问题！</p>

<h3 id="ab">ab工具安装</h3>
<p>ubuntu: aptitude install apache2-utils
centos: yum install httpd-tools.x86_64</p>


    </div>
</div>



    
        <div class="comment">
    
    <!-- duoshuo -->
    
    <div class="ds-thread" data-thread-key="/2014/11/16/linux知识点汇总" data-title="Linux知识点汇总" data-url="http://jgj1986.github.io/2014/11/16/linux%E7%9F%A5%E8%AF%86%E7%82%B9%E6%B1%87%E6%80%BB.html"></div>
    <script type="text/javascript">
    var duoshuoQuery = {short_name:"blog-woshifengzi"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.unstable.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
    

    
    <!-- disqus -->
    
    
    
</div>

    



                    </div>
                    <div class="col-md-3" id="main-right">
                        <div>
    <h4><strong>文章分类</strong></h4>
    <hr class="small-margin colored-hr" />
    <ul class="side-cat-ul">
        
        <li><a href="/categories.html#cat-生活随记" title="生活随记">生活随记 (3)</a></li>
        
        <li><a href="/categories.html#cat-bigdata" title="bigdata">bigdata (9)</a></li>
        
        <li><a href="/categories.html#cat-web" title="web">web (9)</a></li>
        
        <li><a href="/categories.html#cat-database" title="database">database (3)</a></li>
        
        <li><a href="/categories.html#cat-linux" title="linux">linux (10)</a></li>
        
        <li><a href="/categories.html#cat-go" title="go">go (8)</a></li>
        
        <li><a href="/categories.html#cat-运维" title="运维">运维 (3)</a></li>
        
        <li><a href="/categories.html#cat-language" title="language">language (7)</a></li>
        
        <li><a href="/categories.html#cat-tools" title="tools">tools (1)</a></li>
        
        <li><a href="/categories.html#cat-iot" title="iot">iot (5)</a></li>
        
    </ul>
</div>

<hr class="small-margin colored-hr" />

<!-- google adsense -->
<!--
<div>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
        style="display:inline-block;width:300px;height:600px"
        data-ad-client="ca-pub-1339945837472110"
        data-ad-slot="8220828081"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
</div>
-->


                    </div>
                </div>
            </div>

            <div id="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <hr class="colored-hr" />

                <p class="text-center">
                Copyright 2014 - 2016 | Gen time&#58; 2016-04-12 01:51:47 CST

                <!-- cnzz -->
                

                </p>


            </div>
        </div>
    </div>
    <div style="display:none;" class="back-to" id="toolBackTop">
        <a title="返回顶部" onclick="window.scrollTo(0,0);return false;" href="#top" class="back-top">返回顶部</a>
    </div>

    <!-- google analytics -->
    


</div>

    </body>
</html>
