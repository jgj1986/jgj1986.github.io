<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="author" content="jgj" />
        <meta name="viewport" content="width=device-width" /> 
        <title>数据格式转换 | 我是疯子</title>
        
        <meta name="keywords" content="" />
        

        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- bootstrap source -->
        <!-- 新 Bootstrap 核心 CSS 文件 -->
        <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.2.0/css/bootstrap.min.css" />
        <!-- 可选的Bootstrap主题文件（一般不用引入） -->
        <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.2.0/css/bootstrap-theme.min.css" />
        <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
        <script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
        <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
        <script src="http://cdn.bootcss.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

        <link rel="stylesheet" href="/asset/css/kissdata.css" />

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="http://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
            <script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <link href="/feed.html" rel="alternate" title="jgj" type="application/atom+xml" />
        <link rel="shortcut icon" href="/favicon.ico" />
        <link rel="icon" href="/favicon.ico" />

        <style type="text/css">
            body {
                padding-top: 55px;
                padding-bottom: 30px;
                background-color: #EEE;
            }
        </style>

        <link rel="stylesheet" href="/asset/js/google-code-prettify/prettify.css">
        <script src="/asset/js/google-code-prettify/prettify.js"></script>

        <script type="text/javascript">
            $(document).ready(function () {

                // go to top
                var bt = $('#toolBackTop'); var sw = $(document.body)[0].clientWidth; var limitsw = (sw - 840) / 2 - 80; if (limitsw > 0){ limitsw = parseInt(limitsw); bt.css("right",limitsw); } $(window).scroll(function() { var st = $(window).scrollTop(); if(st > 30){ bt.show(); }else{ bt.hide(); } });

                // google-code-prettify
                $("pre").addClass("prettyprint linenums"); prettyPrint();

            })
        </script>

        <!-- kp747 
        
        -->
    </head>
    <body>
            <div id="header">
    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand normal-a" href="javascript:void(0)" onclick="javascript:void(0)">
                    <span id="site_name">我是疯子</span>
                </a>
            </div>

            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li><a href="/">首页</a></li>
                    <li><a href="/categories.html">分类</a></li>
                    <li><a href="/guestbook.html">留言</a></li>
                    <li><a href="/about.html">关于</a></li>
                    <li><a href="/feed.html">RSS</a></li>
                    <li><a href="javascript:void(0)" class="normal-a" onclick="javascript:void(0)"><span id="site_description">在此停留片刻，偶有所得！</span></a></li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </nav>
</div>


            <div class="container">
                <div class="row">
                    <div class="col-md-9" id="main-left">
                        <div class="page">
    <div class="head">
        <div class="title">数据格式转换</div>
        <div class="date">date: 2015-04-07</div>
    </div>
    <hr class="middle-margin" />


    <!-- google adsense -->
    <!--
    <div>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
            style="display:inline-block;width:728px;height:90px"
            data-ad-client="ca-pub-1339945837472110"
            data-ad-slot="9657522081"></ins>
        <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script>
    </div>
    <hr class="middle-margin" />
    -->

    <div class="content">
        <ul id="markdown-toc">
  <li><a href="#section">数字转字符串</a>    <ul>
      <li><a href="#c">C++</a></li>
      <li><a href="#python">python</a></li>
      <li><a href="#go">go</a></li>
      <li><a href="#shell">shell</a></li>
    </ul>
  </li>
  <li><a href="#section-1">字符串转数字</a>    <ul>
      <li><a href="#c-1">C++</a></li>
      <li><a href="#go-1">go</a></li>
      <li><a href="#python-1">python</a></li>
    </ul>
  </li>
  <li><a href="#section-2">对象类型转化</a>    <ul>
      <li><a href="#c-2">C++</a></li>
      <li><a href="#go-2">go</a></li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>很多语言中有或严格或非严格的变量类型要求，而实际的编码的过程中，又难免需要一定的类型转换。</p>
</blockquote>

<h2 id="section">数字转字符串</h2>
<p>数字转字符串或字符串转数字，是比较常见的类型转换。
### C/C++</p>

<pre><code># include &lt;stdio.h&gt;
# include &lt;stdlib.h&gt;
void main (void){
    int num = 100;
    char str[25];
    itoa(num, str, 10);
}
</code></pre>

<p>C语言提供了几个标准库函数，可以将任意类型(整型、长整型、浮点型等)的数字转换为字符串，下面列举了各函数的方法及其说明。</p>

<p>● itoa()：将整型值转换为字符串。
● ltoa()：将长整型值转换为字符串。
● ultoa()：将无符号长整型值转换为字符串。
● gcvt()：将浮点型数转换为字符串，取四舍五入。
● ecvt()：将双精度浮点型值转换为字符串，转换结果中不包含十进制小数点。
● fcvt()：指定位数为转换精度，其余同ecvt()。</p>

<h3 id="c">C++</h3>
<p>to Char*</p>

<pre><code>char str[10];
int a=123;
sprintf(str,"%d",a);
</code></pre>

<p>或用指针操作，存放信息，没有实际放在字符串中。</p>

<pre><code>*((int *)str) = a;
printf("%d\n", *((int *)str));
</code></pre>

<p>to string</p>

<pre><code>#include &lt;sstream&gt;
#Include &lt;string&gt;
string num2str(double i){
    stringstream ss;
    ss&lt;&lt;i;
    // ss.c_str(); // to char*
    return ss.str();
}
</code></pre>

<h3 id="python">python</h3>

<pre><code>int a = 123
str = str(123)
</code></pre>

<h3 id="go">go</h3>

<pre><code>import (
  "fmt"
"strconv"
)
function main() {
    a := 123
    f := 12.3
    str := strconv.Itoa(a)
    fmt.Println("%s\n",str)
    str = strconv.FormatFloat(a,'f', -1, 64)
    fmt.Println("%s\n",str)
    str = toString(a)
}
</code></pre>

<h3 id="shell">shell</h3>

<p>bash shell中没有明确的数字和字符串之分，但是在一些进行判断的时候，需要小心，这里不多描述。      </p>

<h2 id="section-1">字符串转数字</h2>
<p>### C/C++</p>

<pre><code>char str[]="123";
int a;
sscanf(str,"%d",&amp;a);

// or
a = atoi(str);
</code></pre>

<p>注意是 char* 而不是 string</p>

<h3 id="c-1">C++</h3>

<pre><code>istringstream stream1;
string string1 = "25";
stream1.str(string1);
int i;
stream1 &gt;&gt; i;
</code></pre>

<h3 id="go-1">go</h3>

<pre><code>str := "123"
a,error := strconv.Atoi(a)
</code></pre>

<h3 id="python-1">python</h3>

<pre><code>str = "123"  
a = int(str)
</code></pre>

<h2 id="section-2">对象类型转化</h2>

<h3 id="c-2">C++</h3>
<p>static_cast<br />
 最常用的类型转换符，在正常状况下的类型转换，如把int转换为float，如：int i；float f； f=（float）i；或者f=static_cast<float>(i);</float></p>

<p>const_cast<br />
  用于取出const属性，把const类型的指针变为非const类型的指针，如：const int *fun(int x,int y){}　　int *ptr=const_cast&lt;int *&gt;(fun(2.3))</p>

<p>dynamic_cast</p>

<p>该操作符用于运行时检查该转换是否类型安全，但只在多态类型时合法，即该类至少具有一个虚拟方法。
dynamic_cast与static_cast具有相同的基本语法，dynamic_cast主要用于类层次间的上行转换和下行转换，还可以用于类之间的交叉转换。
在类层次间进行上行转换时，dynamic_cast和static_cast的效果是一样的；在进行下行转换时，dynamic_cast具有类型检查的功能，比static_cast更安全。</p>

<p>reinterpret_cast<br />
interpret是解释的意思，reinterpret即为重新解释，此标识符的意思即为数据的二进制形式重新解释，但是不改变其值。</p>

<p>网上的介绍还是比较多的 <a href="http://blog.chinaunix.net/uid-25132162-id-2938837.html" target="_blank">C++中类型转换</a>、
<a href="http://www.cnblogs.com/goodhacker/archive/2011/07/20/2111996.html" target="_blank">C++类型转换总结</a>、
<a href="https://technet.microsoft.com/zh-cn/magazine/hh279667.aspx" target="_blank">类型转换和类型安全（现代 C++）</a>。</p>

<h3 id="go-2">go</h3>
<p>为了适应出现的各种情况，go中经常定义返回的接口为 <code>[]interface{}</code>，如果我们已经能确定里面的类型是int、或string类型时，如何转换。</p>


    </div>
</div>



    
        <div class="comment">
    
    <!-- duoshuo -->
    
    <div class="ds-thread" data-thread-key="/2015/04/07/数据格式转换" data-title="数据格式转换" data-url="http://jgj1986.github.io/2015/04/07/%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2.html"></div>
    <script type="text/javascript">
    var duoshuoQuery = {short_name:"blog-woshifengzi"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.unstable.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
    

    
    <!-- disqus -->
    
    
    
</div>

    



                    </div>
                    <div class="col-md-3" id="main-right">
                        <div>
    <h4><strong>文章分类</strong></h4>
    <hr class="small-margin colored-hr" />
    <ul class="side-cat-ul">
        
        <li><a href="/categories.html#cat-生活随记" title="生活随记">生活随记 (3)</a></li>
        
        <li><a href="/categories.html#cat-bigdata" title="bigdata">bigdata (9)</a></li>
        
        <li><a href="/categories.html#cat-web" title="web">web (9)</a></li>
        
        <li><a href="/categories.html#cat-database" title="database">database (3)</a></li>
        
        <li><a href="/categories.html#cat-linux" title="linux">linux (10)</a></li>
        
        <li><a href="/categories.html#cat-go" title="go">go (8)</a></li>
        
        <li><a href="/categories.html#cat-运维" title="运维">运维 (3)</a></li>
        
        <li><a href="/categories.html#cat-language" title="language">language (7)</a></li>
        
        <li><a href="/categories.html#cat-tools" title="tools">tools (1)</a></li>
        
        <li><a href="/categories.html#cat-iot" title="iot">iot (5)</a></li>
        
    </ul>
</div>

<hr class="small-margin colored-hr" />

<!-- google adsense -->
<!--
<div>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
        style="display:inline-block;width:300px;height:600px"
        data-ad-client="ca-pub-1339945837472110"
        data-ad-slot="8220828081"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
</div>
-->


                    </div>
                </div>
            </div>

            <div id="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <hr class="colored-hr" />

                <p class="text-center">
                Copyright 2014 - 2016 | Gen time&#58; 2016-04-12 01:51:47 CST

                <!-- cnzz -->
                

                </p>


            </div>
        </div>
    </div>
    <div style="display:none;" class="back-to" id="toolBackTop">
        <a title="返回顶部" onclick="window.scrollTo(0,0);return false;" href="#top" class="back-top">返回顶部</a>
    </div>

    <!-- google analytics -->
    


</div>

    </body>
</html>
